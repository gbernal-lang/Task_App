<!--
###########################################################
## Archivo: task_list.html
## Descripción: Template que muestra la lista de tareas registradas. 
##              Incluye botones para agregar, editar y eliminar tareas, 
##              así como alertas emergentes con SweetAlert para mensajes 
##              de éxito.
## Fecha de creación: 2025/Noviembre/11
## Autor: GH (Gustavo Hernández)
## Fecha de última modificación: 2025/Noviembre/12
## Autor última modificación: GH
## Comentarios de última modificación: Se agregaron comentarios descriptivos 
##              y estructura conforme a la guía de legibilidad.
###########################################################
-->

{% extends "tasks/base.html" %}

{% block title %}Lista de Tareas{% endblock %}

{% block content %}


<div class="page-container">
  <h2>LISTA DE TAREAS</h2>


  <!-- Campo de búsqueda -->
  <input type="text" id="filtro" placeholder="Buscar tareas..." class="search-input">

  <!-- Etiqueta para contador -->
  <p class="task-count">Total de tareas: <span id="total-tasks">0</span></p>

  
  <!-- Botón para crear una nueva tarea -->
  <a href="{% url 'task-create' %}" class="btn btn-create">
    <i class="fa-solid fa-circle-up"></i> Agregar tarea
  </a>

  <br/>

  <!-- Tabla con la lista de tareas -->
  <table class="tasks-table">
    <thead>
      <tr>
        <th>Título</th>
        <th>Descripción</th>
        <th>Estado</th>
        <th>Fecha de creación</th>
        <th>Fecha de modificación</th>
        <th></th>
      </tr>
    </thead>

    <tbody id="task-table-body">
      {% for task in tasks %}
    <!--
      {# 
        Cada fila <tr> representa una tarea.
        - data-title: guarda el título de la tarea
        - data-description: guarda la descripción
        Estos atributos "data-*" permiten que el JS pueda leerlos para filtrar sin recargar la página.
    #}
      -->
     <tr data-title="{{ task.title }}" data-description="{{ task.description }}">
        <td>{{ task.title }}</td>
        <td>{{ task.description }}</td>
        <td>{{ task.status }}</td>
        <td>{{ task.created_at|date:"d/m/Y H:i" }}</td>
        <td>{{ task.updated_at|date:"d/m/Y H:i" }}</td>
        <td class="actions-col">
          <!-- Botón para editar tarea -->
          <a href="{% url 'task-update' task.pk %}" class="btn btn-edit">
            <i class="fa-solid fa-pen-to-square"></i>
          </a>

          <!-- Botón para eliminar tarea -->
          <a href="{% url 'task-delete' task.pk %}" class="btn btn-delete">
            <i class="fa-solid fa-trash"></i>
          </a>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="6" class="no-data">No hay tareas registradas.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% endblock %}
